<!DOCTYPE html>
<html lang="pt-br" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.46" />
    <meta name="description" content="Outros comandos e parâmetros úteis no Ansible">


    <title>Passo 7 - Dicas e truques :: Documentação Ansible-br</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    
    <link href="/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79101-13', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <body class="" data-url="/primeiros-passos/guia-rapido/passo-7/">
    <nav id="sidebar" class="showVisitedLinks">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	<p>Documentação Ansible-br</p>



    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Pesquisar...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/ansible-br.github.io\/";
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
        
        
        
          
          


 
  
    
    <li data-nav-id="/por-que-ansible/" class="dd-item 
        
        
        
        ">
      <a href="/por-que-ansible/">
        <span><i class='fa fa-question-circle'></i>Por que Ansible?</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/por-que-ansible/all-in-one/" class="dd-item 
        
        
        
        ">
      <a href="/por-que-ansible/all-in-one/">
        <span>All-in-one: Tudo em um</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/all-in-one/gerencia-configuracao/" class="dd-item
     
      ">
        <a href="/por-que-ansible/all-in-one/gerencia-configuracao/">
        <span>Gerência de Configuração</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/all-in-one/orquestracao/" class="dd-item
     
      ">
        <a href="/por-que-ansible/all-in-one/orquestracao/">
        <span>Orquestração</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/all-in-one/provisionamento/" class="dd-item
     
      ">
        <a href="/por-que-ansible/all-in-one/provisionamento/">
        <span>Provisionamento</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/curva-aprendizado/" class="dd-item
     
      ">
        <a href="/por-que-ansible/curva-aprendizado/">
        <span>Curva de Aprendizado</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/infra-mutavel/" class="dd-item
     
      ">
        <a href="/por-que-ansible/infra-mutavel/">
        <span>Infra Mutável</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/sem-agentes/" class="dd-item
     
      ">
        <a href="/por-que-ansible/sem-agentes/">
        <span>Sem agentes</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/quem-usa/" class="dd-item
     
      ">
        <a href="/por-que-ansible/quem-usa/">
        <span>Quem usa?</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/por-que-ansible/faq/" class="dd-item
     
      ">
        <a href="/por-que-ansible/faq/">
        <span>FAQ</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/primeiros-passos/" class="dd-item 
        parent
        
        
        ">
      <a href="/primeiros-passos/">
        <span><i class='fa fa-chevron-circle-right'></i>Primeiros Passos</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/primeiros-passos/guia-rapido/" class="dd-item 
        parent
        
        
        ">
      <a href="/primeiros-passos/guia-rapido/">
        <span>Guia Rápido</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-1/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-1/">
        <span>Passo 1 - Repositório</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-2/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-2/">
        <span>Passo 2 - Instalação</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-3/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-3/">
        <span>Passo 3 - Ad-Hoc</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-4/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-4/">
        <span>Passo 4 - Módulos</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-5/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-5/">
        <span>Passo 5 - Inventário</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-6/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/passo-6/">
        <span>Passo 6 - Playbook</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/passo-7/" class="dd-item
     active
      ">
        <a href="/primeiros-passos/guia-rapido/passo-7/">
        <span>Passo 7 - Dicas e truques</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/guia-rapido/recap/" class="dd-item
     
      ">
        <a href="/primeiros-passos/guia-rapido/recap/">
        <span>Recapitulando</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/primeiros-passos/materiais-de-estudo/" class="dd-item 
        
        
        
        ">
      <a href="/primeiros-passos/materiais-de-estudo/">
        <span>Materiais de Estudo</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/materiais-de-estudo/livros/" class="dd-item
     
      ">
        <a href="/primeiros-passos/materiais-de-estudo/livros/">
        <span>Livros</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/materiais-de-estudo/cursos/" class="dd-item
     
      ">
        <a href="/primeiros-passos/materiais-de-estudo/cursos/">
        <span>Cursos</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/materiais-de-estudo/webinars/" class="dd-item
     
      ">
        <a href="/primeiros-passos/materiais-de-estudo/webinars/">
        <span>Webinars</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/materiais-de-estudo/sites-referencia/" class="dd-item
     
      ">
        <a href="/primeiros-passos/materiais-de-estudo/sites-referencia/">
        <span>Sites de Referência</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/primeiros-passos/windows-e-ansible/" class="dd-item 
        
        
        
        ">
      <a href="/primeiros-passos/windows-e-ansible/">
        <span>Windows e Ansible</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/windows-e-ansible/windows-1/" class="dd-item
     
      ">
        <a href="/primeiros-passos/windows-e-ansible/windows-1/">
        <span>Windows - Conceitos Básicos</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/primeiros-passos/windows-e-ansible/windows-2/" class="dd-item
     
      ">
        <a href="/primeiros-passos/windows-e-ansible/windows-2/">
        <span>Windows - Pré-requisitos</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aprenda-mais/" class="dd-item 
        
        
        
        ">
      <a href="/aprenda-mais/">
        <span><i class='fa fa-mortar-board'></i>Aprenda mais</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aprenda-mais/changelogs/" class="dd-item 
        
        
        
        ">
      <a href="/aprenda-mais/changelogs/">
        <span>Changelogs</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/aprenda-mais/changelogs/ansible-2.4-import-include/" class="dd-item
     
      ">
        <a href="/aprenda-mais/changelogs/ansible-2.4-import-include/">
        <span>Ansible 2.4 — Include x Import</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/aprenda-mais/changelogs/ansible-2.4-novas-funcionalidades-e-modulos/" class="dd-item
     
      ">
        <a href="/aprenda-mais/changelogs/ansible-2.4-novas-funcionalidades-e-modulos/">
        <span>Ansible 2.4 — Novas funcionalidades e Módulos</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/search/" class="dd-item 
        
        
        
        ">
      <a href="/search/">
        <span>Sobre a busca</span>

        
        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
              
    </li>
  
 

          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>Mais</h3>
                    <a href="https://t.me/ansiblebr/"><i class='fa fa-telegram'></i> Grupo Telegram</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://infraascode.slack.com"><i class='fa fa-slack'></i> Slack Infra-as-Code</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="http://docs.ansible.com/ansible/latest/index.html"><i class='fa fa-bookmark'></i> Documentação Oficial Ansible</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://github.com/ansible-br/site-hugo/"><i class='fa fa-github'></i> Repositório Github</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="/creditos"><i class='fa fa-bullhorn'></i> Créditos</a>
                    
                </li>
            
        </section>    
        
        
            <a class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Limpar Histórico</a>
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/ansible-br/site-hugo/edit/master/content/primeiros-passos/guia-rapido/passo-7.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Editar página
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                










 <a href='/'>Documentação Ansible-br</a> > <a href='/primeiros-passos/'>Primeiros Passos</a> > <a href='/primeiros-passos/guia-rapido/'>Guia Rápido</a> > Passo 7 - Dicas e truques

 

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#1-criar-relação-de-confiança-hosts-linux">1) Criar relação de confiança Hosts Linux</a>
<ul>
<li><a href="#gerar-uma-chave-de-conexão">Gerar uma chave de conexão</a></li>
<li><a href="#copiar-o-id-para-o-hosts-alvo">Copiar o ID para o Hosts alvo</a></li>
</ul></li>
<li><a href="#2-outras-opções-de-conexão-com-os-hosts-alvo">2) Outras opções de conexão com os Hosts Alvo</a>
<ul>
<li><a href="#solicitando-a-senha-do-usuário-pelo-prompt-ask-pass">Solicitando a senha do usuário pelo prompt <code>--ask-pass</code></a></li>
<li><a href="#solicitando-senha-para-escalar-privilégios-pelo-prompt-ask-become-pass">Solicitando senha para escalar privilégios pelo prompt <code>--ask-become-pass</code></a></li>
</ul></li>
<li><a href="#3-listagem-de-hosts-e-tasks-das-playbooks">3) Listagem de Hosts e Tasks das Playbooks</a>
<ul>
<li><a href="#listando-todos-os-hosts-das-playbooks-list-hosts">Listando todos os Hosts das Playbooks: <code>--list-hosts</code></a></li>
<li><a href="#listando-todas-as-tasks-das-playbooks-list-tasks">Listando todas as TASKS das Playbooks: <code>--list-tasks</code></a></li>
</ul></li>
<li><a href="#4-checagem-de-sintaxe">4) Checagem de sintaxe</a>
<ul>
<li><a href="#checando-a-sintaxe-yaml-syntax-check">Checando a sintaxe YAML: <code>--syntax-check</code></a></li>
</ul></li>
<li><a href="#5-saltos">5) Saltos</a>
<ul>
<li><a href="#confirmando-a-execução-das-tasks-step">Confirmando a execução das TASKs: <code>--step</code></a></li>
<li><a href="#iniciando-a-playbook-a-partir-de-uma-task-start-at-task">Iniciando a Playbook a partir de uma TASK: <code>--start-at-task</code></a></li>
<li><a href="#limitando-a-execução-da-playbook-limit">Limitando a execução da playbook: <code>--limit</code></a></li>
</ul></li>
<li><a href="#6-depurando-debug">6) Depurando (Debug)</a>
<ul>
<li><a href="#executando-a-playbook-em-debug-modo-1-v">Executando a playbook em Debug modo 1: <code>-v</code></a></li>
<li><a href="#executando-a-playbook-em-debug-modo-2-vv">Executando a playbook em Debug modo 2: <code>-vv</code></a></li>
<li><a href="#executando-a-playbook-em-debug-modo-3-vvv">Executando a playbook em Debug modo 3: <code>-vvv</code></a></li>
<li><a href="#executando-a-playbook-em-debug-de-conexão-vvvv">Executando a playbook em Debug de conexão: <code>-vvvv</code></a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Passo 7 - Dicas e truques</h1>
          






<h3 id="1-criar-relação-de-confiança-hosts-linux">1) Criar relação de confiança Hosts Linux</h3>

<p>Para se conectar aos Hosts Linux, o meio mais prático é criar relação de confiança entre o Ansible Control e os Hosts alvo:</p>

<h4 id="gerar-uma-chave-de-conexão">Gerar uma chave de conexão</h4>

<pre><code>$ ssh-key-gen
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Generating public/private rsa key pair.
Enter file in which to save the key (/home/usuario/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/usuario/.ssh/id_rsa.
Your public key has been saved in /home/usuario/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:V3HiftgtJiQ6TZA1sP1GBaIu1ueHJs2sFcVykr0KtbM usuario@localhost.localdomain
The key's randomart image is:
+---[RSA 2048]----+
|        o++ +.o  |
|        .= B =   |
|        o O X    |
|       o = &amp; + . |
|      o S B B = .|
|     . . X B + . |
|        . E .    |
|         = .     |
|        .        |
+----[SHA256]-----+
</code></pre>

    </div>
</div>



<h4 id="copiar-o-id-para-o-hosts-alvo">Copiar o ID para o Hosts alvo</h4>

<pre><code>$ ssh-copy-id &lt;nome_host&gt;
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/home/usuario/.ssh/id_rsa.pub&quot;
The authenticity of host 'localhost (::1)' can't be established.
ECDSA key fingerprint is SHA256:bu8qjbMTNPCVu3Ng9T971h6XMh9K9+i+l8VRrLABg6A.
ECDSA key fingerprint is MD5:d4:37:ed:7d:db:bd:bc:f8:1e:2a:de:7d:5e:f1:d6:3f.
Are you sure you want to continue connecting (yes/no)? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
usuario@localhost's password:

Number of key(s) added: 1

Now try logging into the machine, with:   &quot;ssh 'localhost'&quot;
and check to make sure that only the key(s) you wanted were added.
</code></pre>

    </div>
</div>



<h3 id="2-outras-opções-de-conexão-com-os-hosts-alvo">2) Outras opções de conexão com os Hosts Alvo</h3>

<h4 id="solicitando-a-senha-do-usuário-pelo-prompt-ask-pass">Solicitando a senha do usuário pelo prompt <code>--ask-pass</code></h4>

<pre><code>$ ansible-playbook -i /etc/ansible/hosts-test playbook.yml --ask-pass
SSH password:
PLAY [1 - Criando servidores web] ***************************************************************************
TASK [Gathering Facts] **************************************************************************************
ok: [web1.example.com]
ok: [web2.example.com]
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir outras opções de conexão
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Opções de Conexão:
    controle de quem e como se conectar aos hosts
    -k, --ask-pass      pede senha para a conexão
    --private-key=PRIVATE_KEY_FILE, --key-file=PRIVATE_KEY_FILE
                        usa esse arquivo para autenticar a conexão
    -u REMOTE_USER, --user=REMOTE_USER
                        conecta como este usuário (default=None)
    -c CONNECTION, --connection=CONNECTION
                        tipo de conexão a usar (default=smart)
    -T TIMEOUT, --timeout=TIMEOUT
                        sobrescreve o timeout da conexão em segundos
                        (default=10)
    --ssh-common-args=SSH_COMMON_ARGS
                        especifica os argumentos comuns para passar ao sftp/scp/ssh (e.g.
                        ProxyCommand)
    --sftp-extra-args=SFTP_EXTRA_ARGS
                        especifica os argumentos extras para passar somente ao sftp (e.g. -f,
                        -l)
    --scp-extra-args=SCP_EXTRA_ARGS
                        especifica os argumentos extras para passar somente ao scp  (e.g. -l)
    --ssh-extra-args=SSH_EXTRA_ARGS
                        especifica os argumentos extras para passar somente ao ssh  (e.g. -R)
</code></pre>

    </div>
</div>



<h4 id="solicitando-senha-para-escalar-privilégios-pelo-prompt-ask-become-pass">Solicitando senha para escalar privilégios pelo prompt <code>--ask-become-pass</code></h4>

<pre><code>ansible-playbook -i /etc/ansible/hosts-test playbook.yml --ask-become-pas
SUDO password[defaults to SSH password]:
PLAY [1 - Criando servidores web] ***************************************************************************
TASK [Gathering Facts] **************************************************************************************
ok: [web1.example.com]
ok: [web2.example.com]
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir outras opções de escalação de privilégios
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Privilege Escalation Options:
    control how and which user you become as on target hosts

    -s, --sudo          run operations with sudo (nopasswd) (deprecated, use
                        become)
    -U SUDO_USER, --sudo-user=SUDO_USER
                        desired sudo user (default=root) (deprecated, use
                        become)
    -S, --su            run operations with su (deprecated, use become)
    -R SU_USER, --su-user=SU_USER
                        run operations with su as this user (default=root)
                        (deprecated, use become)
    -b, --become        run operations with become (does not imply password
                        prompting)
    --become-method=BECOME_METHOD
                        privilege escalation method to use (default=sudo),
                        valid choices: [ sudo | su | pbrun | pfexec | doas |
                        dzdo | ksu | runas ]
    --become-user=BECOME_USER
                        run operations as this user (default=root)
    --ask-sudo-pass     ask for sudo password (deprecated, use become)
    --ask-su-pass       ask for su password (deprecated, use become)
    -K, --ask-become-pass
                        ask for privilege escalation password
</code></pre>

    </div>
</div>



<h3 id="3-listagem-de-hosts-e-tasks-das-playbooks">3) Listagem de Hosts e Tasks das Playbooks</h3>

<h4 id="listando-todos-os-hosts-das-playbooks-list-hosts">Listando todos os Hosts das Playbooks: <code>--list-hosts</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --list-hosts
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>playbook: playbook.yml
  play #1 (webservers): 1 - Criando servidores web  TAGS: []
    pattern: [u'webservers']
    hosts (2):
      web2.example.com
      web1.example.com
  play #2 (dbservers): 2 - Criando o servidor de banco  TAGS: []
    pattern: [u'dbservers']
    hosts (1):
      db.example.com
</code></pre>

    </div>
</div>



<h4 id="listando-todas-as-tasks-das-playbooks-list-tasks">Listando todas as TASKS das Playbooks: <code>--list-tasks</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --list-tasks
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>playbook: playbook.yml
  play #1 (webservers): 1 - Criando servidores web  TAGS: []
    tasks:
      garantiar que o Apache esteja na última versão    TAGS: []
      conter a linha '127.0.0.1 teste' no arquivo /etc/hosts    TAGS: []

  play #2 (dbservers): 2 - Criando o servidor de banco  TAGS: []
    tasks:
      garantir que o mysqld (MariaDB) está na última versão TAGS: []
      garantir que o  mysqld (MariaDB) está executando (e habilitá-lo no boot)  TAGS: []
</code></pre>

    </div>
</div>



<h3 id="4-checagem-de-sintaxe">4) Checagem de sintaxe</h3>

<h4 id="checando-a-sintaxe-yaml-syntax-check">Checando a sintaxe YAML: <code>--syntax-check</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --syntax-check
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>ERROR! Syntax Error while loading YAML.

The error appears to have been in '/home/usuario/playbook.yml': line 4, column 10, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name: 1 - Criando servidores web
    hosts: webservers
         ^ here  
</code></pre>

    </div>
</div>



<h3 id="5-saltos">5) Saltos</h3>

<h4 id="confirmando-a-execução-das-tasks-step">Confirmando a execução das TASKs: <code>--step</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --step
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>PLAY [1 - Criando servidores web] ***************************************************************************
Perform task: TASK: Gathering Facts (N)o/(y)es/(c)ontinue: y

Perform task: TASK: Gathering Facts (N)o/(y)es/(c)ontinue: **************************************************

TASK [Gathering Facts] **************************************************************************************
ok: [web2.example.com]
ok: [web1.example.com]
Perform task: TASK: garantiar que o Apache esteja na última versão (N)o/(y)es/(c)ontinue: y

Perform task: TASK: garantiar que o Apache esteja na última versão (N)o/(y)es/(c)ontinue: *******************

TASK [garantiar que o Apache esteja na última versão] *******************************************************
ok: [web2.example.com]
ok: [web1.example.com]  
</code></pre>

    </div>
</div>



<h4 id="iniciando-a-playbook-a-partir-de-uma-task-start-at-task">Iniciando a Playbook a partir de uma TASK: <code>--start-at-task</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --start-at-task=&quot;garantir que o mysqld (MariaDB) está na última versão&quot;
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>PLAY [1 - Criando servidores web] ***************************************************************************

PLAY [2 - Criando o servidor de banco] **********************************************************************

TASK [Gathering Facts] **************************************************************************************
ok: [db.example.com]

TASK [garantir que o mysqld (MariaDB) está na última versão] ************************************************
ok: [db.example.com]

TASK [garantir que o  mysqld (MariaDB) está executando (e habilitá-lo no boot)] *****************************
ok: [db.example.com]

PLAY RECAP **************************************************************************************************
db.example.com             : ok=3    changed=0    unreachable=0    failed=0
</code></pre>

    </div>
</div>



<h4 id="limitando-a-execução-da-playbook-limit">Limitando a execução da playbook: <code>--limit</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml --limit web1.example.com
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>PLAY [1 - Criando servidores web] ***************************************************************************

TASK [Gathering Facts] **************************************************************************************
ok: [web1.example.com]

TASK [garantiar que o Apache esteja na última versão] *******************************************************
ok: [web1.example.com]

TASK [conter a linha '127.0.0.1 teste' no arquivo /etc/hosts] ***********************************************
ok: [web1.example.com]

PLAY [2 - Criando o servidor de banco] **********************************************************************
skipping: no hosts matched

PLAY RECAP **************************************************************************************************
web1.example.com           : ok=3    changed=0    unreachable=0    failed=0
</code></pre>

    </div>
</div>



<h3 id="6-depurando-debug">6) Depurando (Debug)</h3>

<h4 id="executando-a-playbook-em-debug-modo-1-v">Executando a playbook em Debug modo 1: <code>-v</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml -v
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Using /etc/ansible/ansible.cfg as config file

PLAY [1 - Criando servidores web] ***************************************************************************

TASK [Gathering Facts] **************************************************************************************
ok: [web1.example.com]
ok: [web2.example.com]

TASK [garantiar que o Apache esteja na última versão] *******************************************************
ok: [web2.example.com] =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;Nothing to do&quot;}
ok: [web1.example.com] =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;Nothing to do&quot;}
</code></pre>

    </div>
</div>



<h4 id="executando-a-playbook-em-debug-modo-2-vv">Executando a playbook em Debug modo 2: <code>-vv</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml -vv
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Using /etc/ansible/ansible.cfg as config file

PLAYBOOK: playbook.yml **************************************************************************************
2 plays in playbook.yml

PLAY [1 - Criando servidores web] ***************************************************************************

TASK [Gathering Facts] **************************************************************************************
ok: [web1.example.com]
ok: [web2.example.com]
META: ran handlers

TASK [garantiar que o Apache esteja na última versão] *******************************************************
task path: /home/vagrant/playbook.yml:8
ok: [web1.example.com] =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;Nothing to do&quot;}
ok: [web2.example.com] =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;Nothing to do&quot;}
</code></pre>

    </div>
</div>



<h4 id="executando-a-playbook-em-debug-modo-3-vvv">Executando a playbook em Debug modo 3: <code>-vvv</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml -vvv
</code></pre>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Using /etc/ansible/ansible.cfg as config file

PLAYBOOK: playbook.yml **************************************************************************************
2 plays in playbook.yml

PLAY [1 - Criando servidores web] ***************************************************************************

TASK [Gathering Facts] **************************************************************************************
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
&lt;web2.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web2.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
&lt;web1.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web1.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416 `&quot; &amp;&amp; echo ansible-tmp-1505758887.22-149098275158416=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507 `&quot; &amp;&amp; echo ansible-tmp-1505758887.23-186920271278507=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507 `&quot; ) &amp;&amp; sleep 0'
&lt;web2.example.com&gt; PUT /tmp/tmpr3Pb0C TO /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416/setup.py
&lt;web2.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416/ /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416/setup.py &amp;&amp; sleep 0'
&lt;web1.example.com&gt; PUT /tmp/tmpXsqZud TO /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507/setup.py
&lt;web1.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507/ /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507/setup.py &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507/setup.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505758887.23-186920271278507/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416/setup.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505758887.22-149098275158416/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [web2.example.com]
ok: [web1.example.com]
META: ran handlers

TASK [garantiar que o Apache esteja na última versão] *******************************************************
task path: /home/vagrant/playbook.yml:8

Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/dnf.py
&lt;web2.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web2.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/dnf.py
&lt;web1.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web1.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402 `&quot; &amp;&amp; echo ansible-tmp-1505758887.98-268212739924402=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879 `&quot; &amp;&amp; echo ansible-tmp-1505758887.99-60716236244879=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; PUT /tmp/tmpoO3S1e TO /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879/dnf.py
&lt;web1.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879/ /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879/dnf.py &amp;&amp; sleep 0'
&lt;web2.example.com&gt; PUT /tmp/tmprEr4zm TO /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402/dnf.py
&lt;web2.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402/ /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402/dnf.py &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879/dnf.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505758887.99-60716236244879/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402/dnf.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505758887.98-268212739924402/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
Using /etc/ansible/ansible.cfg as config file
</code></pre>

    </div>
</div>



<h4 id="executando-a-playbook-em-debug-de-conexão-vvvv">Executando a playbook em Debug de conexão: <code>-vvvv</code></h4>

<pre><code>$ sudo ansible-playbook -i /etc/ansible/hosts-test playbook.yml -vvvv
</code></pre>

<p><div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
    	<i style="font-size:x-small;" class="fa fa-chevron-right"></i>
    	<span>
    	
    	Expandir saída
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
<pre><code>Using /etc/ansible/ansible.cfg as config file
Loading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/__init__.pyc

PLAYBOOK: playbook.yml ***************************************************************************************************************************************
2 plays in playbook.yml

PLAY [1 - Criando servidores web] ****************************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
&lt;web2.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web2.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
&lt;web1.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web1.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180 `&quot; &amp;&amp; echo ansible-tmp-1505759060.8-152711064366180=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054 `&quot; &amp;&amp; echo ansible-tmp-1505759060.81-245677638709054=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054 `&quot; ) &amp;&amp; sleep 0'
&lt;web2.example.com&gt; PUT /tmp/tmpaKgICu TO /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180/setup.py
&lt;web2.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180/ /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180/setup.py &amp;&amp; sleep 0'
&lt;web1.example.com&gt; PUT /tmp/tmpffkXRp TO /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054/setup.py
&lt;web1.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054/ /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054/setup.py &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180/setup.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759060.8-152711064366180/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054/setup.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759060.81-245677638709054/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [web1.example.com]
ok: [web2.example.com]
META: ran handlers

TASK [garantiar que o Apache esteja na última versão] ********************************************************************************************************
task path: /home/vagrant/playbook.yml:8
Running dnf
Running dnf
Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/dnf.py
&lt;web2.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web2.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/dnf.py
&lt;web1.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web1.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844 `&quot; &amp;&amp; echo ansible-tmp-1505759061.68-97065988608844=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213 `&quot; &amp;&amp; echo ansible-tmp-1505759061.69-112968493935213=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; PUT /tmp/tmp6j5O7C TO /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213/dnf.py
&lt;web1.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213/ /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213/dnf.py &amp;&amp; sleep 0'
&lt;web2.example.com&gt; PUT /tmp/tmpt7DaRm TO /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844/dnf.py
&lt;web2.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844/ /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844/dnf.py &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844/dnf.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759061.68-97065988608844/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213/dnf.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759061.69-112968493935213/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [web1.example.com] =&gt; {
    &quot;changed&quot;: false,
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;conf_file&quot;: null,
            &quot;disable_gpg_check&quot;: false,
            &quot;disablerepo&quot;: [],
            &quot;enablerepo&quot;: [],
            &quot;installroot&quot;: &quot;/&quot;,
            &quot;list&quot;: null,
            &quot;name&quot;: [
                &quot;httpd&quot;
            ],
            &quot;state&quot;: &quot;latest&quot;
        }
    },
    &quot;msg&quot;: &quot;Nothing to do&quot;
}
ok: [web2.example.com] =&gt; {
    &quot;changed&quot;: false,
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;conf_file&quot;: null,
            &quot;disable_gpg_check&quot;: false,
            &quot;disablerepo&quot;: [],
            &quot;enablerepo&quot;: [],
            &quot;installroot&quot;: &quot;/&quot;,
            &quot;list&quot;: null,
            &quot;name&quot;: [
                &quot;httpd&quot;
            ],
            &quot;state&quot;: &quot;latest&quot;
        }
    },
    &quot;msg&quot;: &quot;Nothing to do&quot;
}

TASK [conter a linha '127.0.0.1 teste' no arquivo /etc/hosts] ************************************************************************************************
task path: /home/vagrant/playbook.yml:11
Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
&lt;web2.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web2.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
&lt;web1.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;web1.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360 `&quot; &amp;&amp; echo ansible-tmp-1505759065.55-162492297075360=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102 `&quot; &amp;&amp; echo ansible-tmp-1505759065.55-181080519971102=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102 `&quot; ) &amp;&amp; sleep 0'
&lt;web1.example.com&gt; PUT /tmp/tmp4voCMr TO /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102/lineinfile.py
&lt;web1.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102/ /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102/lineinfile.py &amp;&amp; sleep 0'
&lt;web2.example.com&gt; PUT /tmp/tmpCqHjcI TO /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360/lineinfile.py
&lt;web2.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360/ /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360/lineinfile.py &amp;&amp; sleep 0'
&lt;web1.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102/lineinfile.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759065.55-181080519971102/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
&lt;web2.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360/lineinfile.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759065.55-162492297075360/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [web1.example.com] =&gt; {
    &quot;backup&quot;: &quot;&quot;,
    &quot;changed&quot;: false,
    &quot;diff&quot;: [
        {
            &quot;after&quot;: &quot;&quot;,
            &quot;after_header&quot;: &quot;/etc/hosts (content)&quot;,
            &quot;before&quot;: &quot;&quot;,
            &quot;before_header&quot;: &quot;/etc/hosts (content)&quot;
        },
        {
            &quot;after_header&quot;: &quot;/etc/hosts (file attributes)&quot;,
            &quot;before_header&quot;: &quot;/etc/hosts (file attributes)&quot;
        }
    ],
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;attributes&quot;: null,
            &quot;backrefs&quot;: false,
            &quot;backup&quot;: false,
            &quot;content&quot;: null,
            &quot;create&quot;: false,
            &quot;delimiter&quot;: null,
            &quot;directory_mode&quot;: null,
            &quot;follow&quot;: false,
            &quot;force&quot;: null,
            &quot;group&quot;: null,
            &quot;insertafter&quot;: null,
            &quot;insertbefore&quot;: null,
            &quot;line&quot;: &quot;127.0.0.1 teste&quot;,
            &quot;mode&quot;: null,
            &quot;owner&quot;: null,
            &quot;path&quot;: &quot;/etc/hosts&quot;,
            &quot;regexp&quot;: null,
            &quot;remote_src&quot;: null,
            &quot;selevel&quot;: null,
            &quot;serole&quot;: null,
            &quot;setype&quot;: null,
            &quot;seuser&quot;: null,
            &quot;src&quot;: null,
            &quot;state&quot;: &quot;present&quot;,
            &quot;unsafe_writes&quot;: null,
            &quot;validate&quot;: null
        }
    },
    &quot;msg&quot;: &quot;&quot;
}
ok: [web2.example.com] =&gt; {
    &quot;backup&quot;: &quot;&quot;,
    &quot;changed&quot;: false,
    &quot;diff&quot;: [
        {
            &quot;after&quot;: &quot;&quot;,
            &quot;after_header&quot;: &quot;/etc/hosts (content)&quot;,
            &quot;before&quot;: &quot;&quot;,
            &quot;before_header&quot;: &quot;/etc/hosts (content)&quot;
        },
        {
            &quot;after_header&quot;: &quot;/etc/hosts (file attributes)&quot;,
            &quot;before_header&quot;: &quot;/etc/hosts (file attributes)&quot;
        }
    ],
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;attributes&quot;: null,
            &quot;backrefs&quot;: false,
            &quot;backup&quot;: false,
            &quot;content&quot;: null,
            &quot;create&quot;: false,
            &quot;delimiter&quot;: null,
            &quot;directory_mode&quot;: null,
            &quot;follow&quot;: false,
            &quot;force&quot;: null,
            &quot;group&quot;: null,
            &quot;insertafter&quot;: null,
            &quot;insertbefore&quot;: null,
            &quot;line&quot;: &quot;127.0.0.1 teste&quot;,
            &quot;mode&quot;: null,
            &quot;owner&quot;: null,
            &quot;path&quot;: &quot;/etc/hosts&quot;,
            &quot;regexp&quot;: null,
            &quot;remote_src&quot;: null,
            &quot;selevel&quot;: null,
            &quot;serole&quot;: null,
            &quot;setype&quot;: null,
            &quot;seuser&quot;: null,
            &quot;src&quot;: null,
            &quot;state&quot;: &quot;present&quot;,
            &quot;unsafe_writes&quot;: null,
            &quot;validate&quot;: null
        }
    },
    &quot;msg&quot;: &quot;&quot;
}
META: ran handlers
META: ran handlers

PLAY [2 - Criando o servidor de banco] ***********************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
&lt;db.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;db.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873 `&quot; &amp;&amp; echo ansible-tmp-1505759065.97-109285672908873=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873 `&quot; ) &amp;&amp; sleep 0'
&lt;db.example.com&gt; PUT /tmp/tmps2iGBs TO /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873/setup.py
&lt;db.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873/ /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873/setup.py &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873/setup.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759065.97-109285672908873/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [db.example.com]
META: ran handlers

TASK [garantir que o mysqld (MariaDB) está na última versão] *************************************************************************************************
task path: /home/vagrant/playbook.yml:19
Running dnf
Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/dnf.py
&lt;db.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;db.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914 `&quot; &amp;&amp; echo ansible-tmp-1505759066.31-218005801299914=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914 `&quot; ) &amp;&amp; sleep 0'
&lt;db.example.com&gt; PUT /tmp/tmpfj3ysn TO /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914/dnf.py
&lt;db.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914/ /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914/dnf.py &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914/dnf.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759066.31-218005801299914/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [db.example.com] =&gt; {
    &quot;changed&quot;: false,
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;conf_file&quot;: null,
            &quot;disable_gpg_check&quot;: false,
            &quot;disablerepo&quot;: [],
            &quot;enablerepo&quot;: [],
            &quot;installroot&quot;: &quot;/&quot;,
            &quot;list&quot;: null,
            &quot;name&quot;: [
                &quot;mariadb-server&quot;
            ],
            &quot;state&quot;: &quot;latest&quot;
        }
    },
    &quot;msg&quot;: &quot;Nothing to do&quot;
}

TASK [garantir que o  mysqld (MariaDB) está executando (e habilitá-lo no boot)] ******************************************************************************
task path: /home/vagrant/playbook.yml:22
Running systemd
Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/systemd.py
&lt;db.example.com&gt; ESTABLISH LOCAL CONNECTION FOR USER: root
&lt;db.example.com&gt; EXEC /bin/sh -c 'echo ~ &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p &quot;` echo /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273 `&quot; &amp;&amp; echo ansible-tmp-1505759067.92-281167143879273=&quot;` echo /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273 `&quot; ) &amp;&amp; sleep 0'
&lt;db.example.com&gt; PUT /tmp/tmpu4HcSx TO /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273/systemd.py
&lt;db.example.com&gt; EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273/ /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273/systemd.py &amp;&amp; sleep 0'
&lt;db.example.com&gt; EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273/systemd.py; rm -rf &quot;/root/.ansible/tmp/ansible-tmp-1505759067.92-281167143879273/&quot; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
ok: [db.example.com] =&gt; {
    &quot;changed&quot;: false,
    &quot;enabled&quot;: true,
    &quot;invocation&quot;: {
        &quot;module_args&quot;: {
            &quot;daemon_reload&quot;: false,
            &quot;enabled&quot;: true,
            &quot;masked&quot;: null,
            &quot;name&quot;: &quot;mariadb&quot;,
            &quot;no_block&quot;: false,
            &quot;state&quot;: &quot;started&quot;,
            &quot;user&quot;: false
        }
    },
    &quot;name&quot;: &quot;mariadb&quot;,
    &quot;state&quot;: &quot;started&quot;,
    &quot;status&quot;: {
        &quot;ActiveEnterTimestamp&quot;: &quot;Mon 2017-09-18 16:15:55 UTC&quot;,
        &quot;ActiveEnterTimestampMonotonic&quot;: &quot;598708833&quot;,
        &quot;ActiveExitTimestampMonotonic&quot;: &quot;0&quot;,
        &quot;ActiveState&quot;: &quot;active&quot;,
        &quot;After&quot;: &quot;sysinit.target network.target system.slice basic.target -.mount systemd-journald.socket&quot;,
        &quot;AllowIsolate&quot;: &quot;no&quot;,
        &quot;AmbientCapabilities&quot;: &quot;0&quot;,
        &quot;AssertResult&quot;: &quot;yes&quot;,
        &quot;AssertTimestamp&quot;: &quot;Mon 2017-09-18 16:15:43 UTC&quot;,
        &quot;AssertTimestampMonotonic&quot;: &quot;587492647&quot;,
        &quot;Before&quot;: &quot;shutdown.target multi-user.target&quot;,
        &quot;BlockIOAccounting&quot;: &quot;no&quot;,
        &quot;BlockIOWeight&quot;: &quot;18446744073709551615&quot;,
        &quot;CPUAccounting&quot;: &quot;no&quot;,
        &quot;CPUQuotaPerSecUSec&quot;: &quot;infinity&quot;,
        &quot;CPUSchedulingPolicy&quot;: &quot;0&quot;,
        &quot;CPUSchedulingPriority&quot;: &quot;0&quot;,
        &quot;CPUSchedulingResetOnFork&quot;: &quot;no&quot;,
        &quot;CPUShares&quot;: &quot;18446744073709551615&quot;,
        &quot;CPUUsageNSec&quot;: &quot;18446744073709551615&quot;,
        &quot;CanIsolate&quot;: &quot;no&quot;,
        &quot;CanReload&quot;: &quot;no&quot;,
        &quot;CanStart&quot;: &quot;yes&quot;,
        &quot;CanStop&quot;: &quot;yes&quot;,
        &quot;CapabilityBoundingSet&quot;: &quot;18446744073709551615&quot;,
        &quot;ConditionResult&quot;: &quot;yes&quot;,
        &quot;ConditionTimestamp&quot;: &quot;Mon 2017-09-18 16:15:43 UTC&quot;,
        &quot;ConditionTimestampMonotonic&quot;: &quot;587492647&quot;,
        &quot;Conflicts&quot;: &quot;shutdown.target&quot;,
        &quot;ControlGroup&quot;: &quot;/system.slice/mariadb.service&quot;,
        &quot;ControlPID&quot;: &quot;0&quot;,
        &quot;DefaultDependencies&quot;: &quot;yes&quot;,
        &quot;Delegate&quot;: &quot;no&quot;,
        &quot;Description&quot;: &quot;MariaDB 10.1 database server&quot;,
        &quot;DevicePolicy&quot;: &quot;auto&quot;,
        &quot;ExecMainCode&quot;: &quot;0&quot;,
        &quot;ExecMainExitTimestampMonotonic&quot;: &quot;0&quot;,
        &quot;ExecMainPID&quot;: &quot;10637&quot;,
        &quot;ExecMainStartTimestamp&quot;: &quot;Mon 2017-09-18 16:15:54 UTC&quot;,
        &quot;ExecMainStartTimestampMonotonic&quot;: &quot;598269557&quot;,
        &quot;ExecMainStatus&quot;: &quot;0&quot;,
        &quot;ExecStart&quot;: &quot;{ path=/usr/libexec/mysqld ; argv[]=/usr/libexec/mysqld --basedir=/usr $MYSQLD_OPTS $_WSREP_NEW_CLUSTER ; ignore_errors=no ; start_time=[Mon 2017-09-18 16:15:54 UTC] ; stop_time=[n/a] ; pid=10637 ; code=(null) ; status=0/0 }&quot;,
        &quot;ExecStartPost&quot;: &quot;{ path=/usr/libexec/mysql-check-upgrade ; argv[]=/usr/libexec/mysql-check-upgrade ; ignore_errors=no ; start_time=[Mon 2017-09-18 16:15:54 UTC] ; stop_time=[Mon 2017-09-18 16:15:55 UTC] ; pid=10667 ; code=exited ; status=0 }&quot;,
        &quot;ExecStartPre&quot;: &quot;{ path=/usr/libexec/mysql-prepare-db-dir ; argv[]=/usr/libexec/mysql-prepare-db-dir %n ; ignore_errors=no ; start_time=[Mon 2017-09-18 16:15:43 UTC] ; stop_time=[Mon 2017-09-18 16:15:54 UTC] ; pid=10477 ; code=exited ; status=0 }&quot;,
        &quot;ExecStopPost&quot;: &quot;{ path=/usr/libexec/mysql-wait-stop ; argv[]=/usr/libexec/mysql-wait-stop ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&quot;,
        &quot;FailureAction&quot;: &quot;none&quot;,
        &quot;FileDescriptorStoreMax&quot;: &quot;0&quot;,
        &quot;FragmentPath&quot;: &quot;/usr/lib/systemd/system/mariadb.service&quot;,
        &quot;Group&quot;: &quot;mysql&quot;,
        &quot;GuessMainPID&quot;: &quot;yes&quot;,
        &quot;IOScheduling&quot;: &quot;0&quot;,
        &quot;Id&quot;: &quot;mariadb.service&quot;,
        &quot;IgnoreOnIsolate&quot;: &quot;no&quot;,
        &quot;IgnoreSIGPIPE&quot;: &quot;yes&quot;,
        &quot;InactiveEnterTimestampMonotonic&quot;: &quot;0&quot;,
        &quot;InactiveExitTimestamp&quot;: &quot;Mon 2017-09-18 16:15:43 UTC&quot;,
        &quot;InactiveExitTimestampMonotonic&quot;: &quot;587493777&quot;,
        &quot;JobTimeoutAction&quot;: &quot;none&quot;,
        &quot;JobTimeoutUSec&quot;: &quot;infinity&quot;,
        &quot;KillMode&quot;: &quot;process&quot;,
        &quot;KillSignal&quot;: &quot;15&quot;,
        &quot;LimitAS&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitASSoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitCORE&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitCORESoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitCPU&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitCPUSoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitDATA&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitDATASoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitFSIZE&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitFSIZESoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitLOCKS&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitLOCKSSoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitMEMLOCK&quot;: &quot;65536&quot;,
        &quot;LimitMEMLOCKSoft&quot;: &quot;65536&quot;,
        &quot;LimitMSGQUEUE&quot;: &quot;819200&quot;,
        &quot;LimitMSGQUEUESoft&quot;: &quot;819200&quot;,
        &quot;LimitNICE&quot;: &quot;0&quot;,
        &quot;LimitNICESoft&quot;: &quot;0&quot;,
        &quot;LimitNOFILE&quot;: &quot;4096&quot;,
        &quot;LimitNOFILESoft&quot;: &quot;1024&quot;,
        &quot;LimitNPROC&quot;: &quot;1880&quot;,
        &quot;LimitNPROCSoft&quot;: &quot;1880&quot;,
        &quot;LimitRSS&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitRSSSoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitRTPRIO&quot;: &quot;0&quot;,
        &quot;LimitRTPRIOSoft&quot;: &quot;0&quot;,
        &quot;LimitRTTIME&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitRTTIMESoft&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitSIGPENDING&quot;: &quot;1880&quot;,
        &quot;LimitSIGPENDINGSoft&quot;: &quot;1880&quot;,
        &quot;LimitSTACK&quot;: &quot;18446744073709551615&quot;,
        &quot;LimitSTACKSoft&quot;: &quot;8388608&quot;,
        &quot;LoadState&quot;: &quot;loaded&quot;,
        &quot;MainPID&quot;: &quot;10637&quot;,
        &quot;MemoryAccounting&quot;: &quot;no&quot;,
        &quot;MemoryCurrent&quot;: &quot;18446744073709551615&quot;,
        &quot;MemoryLimit&quot;: &quot;18446744073709551615&quot;,
        &quot;MountFlags&quot;: &quot;0&quot;,
        &quot;NFileDescriptorStore&quot;: &quot;0&quot;,
        &quot;Names&quot;: &quot;mariadb.service&quot;,
        &quot;NeedDaemonReload&quot;: &quot;no&quot;,
        &quot;Nice&quot;: &quot;0&quot;,
        &quot;NoNewPrivileges&quot;: &quot;no&quot;,
        &quot;NonBlocking&quot;: &quot;no&quot;,
        &quot;NotifyAccess&quot;: &quot;main&quot;,
        &quot;OOMScoreAdjust&quot;: &quot;0&quot;,
        &quot;OnFailureJobMode&quot;: &quot;replace&quot;,
        &quot;PermissionsStartOnly&quot;: &quot;no&quot;,
        &quot;PrivateDevices&quot;: &quot;no&quot;,
        &quot;PrivateNetwork&quot;: &quot;no&quot;,
        &quot;PrivateTmp&quot;: &quot;yes&quot;,
        &quot;ProtectHome&quot;: &quot;no&quot;,
        &quot;ProtectSystem&quot;: &quot;no&quot;,
        &quot;RefuseManualStart&quot;: &quot;no&quot;,
        &quot;RefuseManualStop&quot;: &quot;no&quot;,
        &quot;RemainAfterExit&quot;: &quot;no&quot;,
        &quot;Requires&quot;: &quot;sysinit.target -.mount system.slice&quot;,
        &quot;RequiresMountsFor&quot;: &quot;/tmp /var/tmp&quot;,
        &quot;Restart&quot;: &quot;on-abort&quot;,
        &quot;RestartUSec&quot;: &quot;5s&quot;,
        &quot;Result&quot;: &quot;success&quot;,
        &quot;RootDirectoryStartOnly&quot;: &quot;no&quot;,
        &quot;RuntimeDirectoryMode&quot;: &quot;0755&quot;,
        &quot;RuntimeMaxUSec&quot;: &quot;infinity&quot;,
        &quot;SameProcessGroup&quot;: &quot;no&quot;,
        &quot;SecureBits&quot;: &quot;0&quot;,
        &quot;SendSIGHUP&quot;: &quot;no&quot;,
        &quot;SendSIGKILL&quot;: &quot;no&quot;,
        &quot;Slice&quot;: &quot;system.slice&quot;,
        &quot;StandardError&quot;: &quot;inherit&quot;,
        &quot;StandardInput&quot;: &quot;null&quot;,
        &quot;StandardOutput&quot;: &quot;journal&quot;,
        &quot;StartLimitAction&quot;: &quot;none&quot;,
        &quot;StartLimitBurst&quot;: &quot;5&quot;,
        &quot;StartLimitInterval&quot;: &quot;10000000&quot;,
        &quot;StartupBlockIOWeight&quot;: &quot;18446744073709551615&quot;,
        &quot;StartupCPUShares&quot;: &quot;18446744073709551615&quot;,
        &quot;StateChangeTimestamp&quot;: &quot;Mon 2017-09-18 16:15:55 UTC&quot;,
        &quot;StateChangeTimestampMonotonic&quot;: &quot;598708833&quot;,
        &quot;StatusErrno&quot;: &quot;0&quot;,
        &quot;StatusText&quot;: &quot;Taking your SQL requests now...&quot;,
        &quot;StopWhenUnneeded&quot;: &quot;no&quot;,
        &quot;SubState&quot;: &quot;running&quot;,
        &quot;SyslogFacility&quot;: &quot;3&quot;,
        &quot;SyslogLevel&quot;: &quot;6&quot;,
        &quot;SyslogLevelPrefix&quot;: &quot;yes&quot;,
        &quot;SyslogPriority&quot;: &quot;30&quot;,
        &quot;SystemCallErrorNumber&quot;: &quot;0&quot;,
        &quot;TTYReset&quot;: &quot;no&quot;,
        &quot;TTYVHangup&quot;: &quot;no&quot;,
        &quot;TTYVTDisallocate&quot;: &quot;no&quot;,
        &quot;TasksAccounting&quot;: &quot;yes&quot;,
        &quot;TasksCurrent&quot;: &quot;26&quot;,
        &quot;TasksMax&quot;: &quot;512&quot;,
        &quot;TimeoutStartUSec&quot;: &quot;5min&quot;,
        &quot;TimeoutStopUSec&quot;: &quot;5min&quot;,
        &quot;TimerSlackNSec&quot;: &quot;50000&quot;,
        &quot;Transient&quot;: &quot;no&quot;,
        &quot;Type&quot;: &quot;notify&quot;,
        &quot;UMask&quot;: &quot;0007&quot;,
        &quot;UnitFilePreset&quot;: &quot;disabled&quot;,
        &quot;UnitFileState&quot;: &quot;enabled&quot;,
        &quot;User&quot;: &quot;mysql&quot;,
        &quot;UtmpMode&quot;: &quot;init&quot;,
        &quot;WantedBy&quot;: &quot;multi-user.target&quot;,
        &quot;WatchdogTimestamp&quot;: &quot;Mon 2017-09-18 16:15:54 UTC&quot;,
        &quot;WatchdogTimestampMonotonic&quot;: &quot;598648636&quot;,
        &quot;WatchdogUSec&quot;: &quot;0&quot;
    }
}
META: ran handlers
META: ran handlers

PLAY RECAP ***************************************************************************************************************************************************
db.example.com             : ok=3    changed=0    unreachable=0    failed=0
web1.example.com           : ok=3    changed=0    unreachable=0    failed=0
web2.example.com           : ok=3    changed=0    unreachable=0    failed=0
</code></pre>

    </div>
</div>

</p>


<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/primeiros-passos/guia-rapido/passo-6/" title="Passo 6 - Playbook"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/primeiros-passos/guia-rapido/recap/" title="Recapitulando" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/learn.js"></script>
<script src="/js/hugo-learn.js"></script>


<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="/mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>

